<!DOCTYPE HTML>
<html>
  <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>Mac下编译 rdm-信口开河</title>
    <meta name="keywords" content="Ruesin,信口开河">
    <meta name="description" content="至于你信不信，反正我是信了。">
    <link rel="stylesheet" href="/css/style.css">
</head>
  <body>
    
<header class="header">
    <nav class="navbar">
        <ul>
            
            <li><a class="header-nav-link" href="/">首页</a></li>
            
            <li><a class="header-nav-link" href="/categories">分类</a></li>
            
            <li><a class="header-nav-link" href="/archives">归档</a></li>
            
            <li><a class="header-nav-link" href="/tags">标签</a></li>
            
            <li><a class="header-nav-link" href="https://github.com/ruesin/notes">Github</a></li>
            
            <li><a class="header-nav-link" href="https://ruesin.github.io/php-tree">PHP技能树</a></li>
            
            <li><a class="header-nav-link" href="https://www.xinkoukaihe.com">老博客</a></li>
            
        </ul>
    </nav>
</header>
    <main class="main">
      <!-- 内容页 -->
<section class="section">
    <div class="post-container">
        <div class="post-header">
                <h1>Mac下编译 rdm</h1>
                <!-- <div class="post-meta">2018-12-14</div> -->
        </div>
        <article class="post-content">
            <p>RedisDesktop 从 0.9.3 开始，不再支持 Windows 和 Mac的免费下载，但仍提供源码，可自行编译。官方给出了使用QT工具编译的文档，本文使用了比较小的QT命令行进行编译安装的。</p>
<p>依赖Xcode，提前从 App Store 安装。</p>
<pre><code>$ git clone --recursive https://github.com/uglide/RedisDesktopManager.git -b 0.9.8 rdm &amp;&amp; cd ./rdm

## 因为 0.9.9 不支持SSH隧道，所以切回0.9.8
$ git checkout 0.9.8
$ git submodule update --init --recursive

## 安装必要依赖
$ brew install openssl cmake

## 安装QT
$ brew install  qt

$ cd ./src 
$ cp resources/Info.plist.sample resources/Info.plist
</code></pre><pre><code>$ ./configure</code></pre><p>报错1：<br><code>xcode-select: error: tool &#39;xcodebuild&#39; requires Xcode, but active developer directory &#39;/Library/Developer/CommandLineTools&#39; is a command line tools instance</code><br>如果没有安装Xcode，需先安装。<br>如果安装多版本Xcode，目录不对，可指定目录：<code>xcode-select --switch /Applications/Xcode.app/Contents/Developer/</code>。  </p>
<p>报错2：<br><code>/Users/sin/tmp/rdm/3rdparty/gbreakpad/src/client/mac/sender/Breakpad.xib:global: error: Compiling for earlier than macOS 10.6 is no longer supported.</code><br>使用 Xcode 打开 Breakpad.xib，在右侧选择Mac OS版本。<br><img src="/images/20181214/2d0ad0e8675fa1c6bf63eedf4f891d4b.png" alt="rdm.png"></p>
<pre><code>$ /usr/local/Cellar/qt/5.12.0/bin/qmake CONFIG-=debug
$ make</code></pre><p>报错1：<br>make: *** No rule to make target <code>../bin/osx/release/crashreporter&#39;, needed by</code>../bin/osx/release/rdm.app/Contents/MacOS/crashreporter’.  Stop.<br>方案1：<br>建议下载 crashreporter 到 ../bin/osx/release 目录，链接: <a href="https://pan.baidu.com/s/1qtkunjollYW6I0XefUIGhQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1qtkunjollYW6I0XefUIGhQ</a> 提取码: dp5h。<br>方案2：<br>编辑 rdm.pro 文件 <code>vim rdm.pro</code>，注释如下代码块。</p>
<pre><code>#release {
#    CRASHREPORTER_APP.files = $$DESTDIR/crashreporter
#    CRASHREPORTER_APP.path = Contents/MacOS
#    QMAKE_BUNDLE_DATA += CRASHREPORTER_APP
#}</code></pre><p><em>rdm.app</em> 生成在<code>../bin/osx/release/</code>目录下，此时可以本地运行，如果要发送给其他人，还需要将QT依赖打包进去。</p>
<pre><code>$ cd ../bin/osx/release/
$ /usr/local/Cellar/qt/5.12.0/bin/macdeployqt rdm.app -qmldir=../../../src/qml</code></pre><p>附上QT工具下载地址<br><a href="http://download.qt.io/archive/qt/5.10/" target="_blank" rel="noopener">http://download.qt.io/archive/qt/5.10/</a></p>
<p><a href="http://download.qt.io/official_releases/qt/" target="_blank" rel="noopener">http://download.qt.io/official_releases/qt/</a></p>
<p>官方编译文档<br><a href="http://docs.redisdesktop.com/en/latest/install/#build-from-source" target="_blank" rel="noopener">http://docs.redisdesktop.com/en/latest/install/#build-from-source</a></p>

        </article>
    </div>
</section>

    </main>
    <footer class="footer"> Copyright 2013 - 2019 Ruesin. All Rights Reserved </footer>
  </body>
</html>