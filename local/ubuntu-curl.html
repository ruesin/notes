<!DOCTYPE HTML>
<html>
  <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>Ubuntu 下编译Curl库及PHP的curl扩展-信口开河</title>
    <meta name="keywords" content="Ruesin,信口开河">
    <meta name="description" content="至于你信不信，反正我是信了。">
    <link rel="stylesheet" href="/css/style.css">
</head>
  <body>
    
<header class="header">
    <nav class="navbar">
        <ul>
            
            <li><a class="header-nav-link" href="/">首页</a></li>
            
            <li><a class="header-nav-link" href="/categories">分类</a></li>
            
            <li><a class="header-nav-link" href="/archives">归档</a></li>
            
            <li><a class="header-nav-link" href="/tags">标签</a></li>
            
            <li><a class="header-nav-link" href="https://github.com/ruesin/notes">Github</a></li>
            
            <li><a class="header-nav-link" href="https://ruesin.github.io/php-tree">PHP技能树</a></li>
            
            <li><a class="header-nav-link" href="https://www.xinkoukaihe.com">老博客</a></li>
            
        </ul>
    </nav>
</header>
    <main class="main">
      <!-- 内容页 -->
<section class="section">
    <div class="post-container">
        <div class="post-header">
                <h1>Ubuntu 下编译Curl库及PHP的curl扩展</h1>
                <!-- <div class="post-meta">2015-12-31</div> -->
        </div>
        <article class="post-content">
            <p>编译PHP的时候连常用的Curl扩展都忘记了，脑也是够残的。</p>
<p>安装Curl，需要先去官网下载源文件。<a href="http://curl.haxx.se/download/" target="_blank" rel="noopener">http://curl.haxx.se/download/</a></p>
<p>$ wget <a href="http://curl.haxx.se/download/curl-7.30.0.tar.gz" target="_blank" rel="noopener">http://curl.haxx.se/download/curl-7.30.0.tar.gz</a><br>$ tar zvxf curl-7.30.0.tar.gz<br>$ cd curl-7.30.0/<br>$ sudo ./configure –prefix=/usr/local/curl<br>$ sudo make<br>$ sudo make install</p>
<p>至此，Curl编译已经完成，在目录/usr/local/curl下会有编译生产的库、头文件等。</p>
<p>程序设计中，为方便移植，可以把include/lib下面的头文件和so库文件拷贝到工程所在目录就可以随时使用curl库了。</p>
<p>将curl加入环境变量，方便随时使用。</p>
<p>$ sudo vi /etc/profile<br>$ source /etc/profile</p>
<p>我们是做web服务用的，当然不至于此，还需要将curl编译到php中，开启php的curl扩展。</p>
<p>$ sudo /usr/local/php/bin/phpize</p>
<p>如果报错：<br>Cannot find autoconf. Please check your autoconf installation and the $PHP_AUTOCONF environment variable. Then, rerun this script.</p>
<p>$ sudo apt-get install m4 autoconf</p>
<p>如果报错：<br>Cannot find config.m4.<br>Make sure that you run ‘/usr/local/php/bin/phpize’ in the top level source directory of the module<br>在需要扩展编译的PHP模块目录中执行/usr/local/php/bin/phpize 这样才不会报错</p>
<p>$ cd ~/source/nmp/php-5.6.10/ext/curl<br>$ sudo /usr/local/php/bin/phpize<br>$ sudo ./configure -with-curl=/usr/local/curl –with-php-config=/usr/local/php/bin/php-config<br>$ sudo make<br>$ sudo make test<br>$ sudo make install<br>$ sudo cp curl.so /usr/local/php/lib/php/extensions/no-debug-non-zts-20131226/curl.so<br>$ sudo vi /usr/local/php/php.ini</p>
<p>开启curl扩展，重启服务。</p>
<p>如果是编译PHP时就想带上curl，编译PHP时加上 –with-curl=/usr/local/curl</p>

        </article>
    </div>
</section>

    </main>
    <footer class="footer"> Copyright 2013 - 2019 Ruesin. All Rights Reserved </footer>
  </body>
</html>