<!DOCTYPE HTML>
<html>
  <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>PHP函数array_multisort实现多维数组按照键值进行排序-信口开河</title>
    <meta name="keywords" content="Ruesin,信口开河">
    <meta name="description" content="至于你信不信，反正我是信了。">
    <link rel="stylesheet" href="/css/style.css">
</head>
  <body>
    
<header class="header">
    <nav class="navbar">
        <ul>
            
            <li><a class="header-nav-link" href="/">首页</a></li>
            
            <li><a class="header-nav-link" href="/categories">分类</a></li>
            
            <li><a class="header-nav-link" href="/archives">归档</a></li>
            
            <li><a class="header-nav-link" href="/tags">标签</a></li>
            
            <li><a class="header-nav-link" href="https://github.com/ruesin/notes">Github</a></li>
            
            <li><a class="header-nav-link" href="https://ruesin.github.io/php-tree">PHP技能树</a></li>
            
            <li><a class="header-nav-link" href="https://www.xinkoukaihe.com">老博客</a></li>
            
        </ul>
    </nav>
</header>
    <main class="main">
      <!-- 内容页 -->
<section class="section">
    <div class="post-container">
        <div class="post-header">
                <h1>PHP函数array_multisort实现多维数组按照键值进行排序</h1>
                <!-- <div class="post-meta">2014-02-26</div> -->
        </div>
        <article class="post-content">
            <p>一直以来对PHP数组排序都是随手用系统函数或者常用的排序办法，或者直接自己写函数了。</p>
<p>今天工作中涉及到了二维数组按照某个键值进行排序时，顺道把php的数组排序函数温习了下。正所谓温故而知新嘛。</p>
<p>需求：在给出的产品列表中，把参加团购的商品放在最前面，即根据二维数组中的 is_group 项对数组进行排序。</p>
<pre><code>$aProduct = array(
    0=&gt; array(&#39;goods_id&#39; =&gt; 1,&#39;name&#39; =&gt;&#39;iPhone 4&#39;,&#39;is_group&#39; =&gt;0),
    1=&gt; array(&#39;goods_id&#39; =&gt; 2,&#39;name&#39; =&gt;&#39;iPhone 4s&#39;,&#39;is_group&#39; =&gt;0),
    2=&gt; array(&#39;goods_id&#39; =&gt; 3,&#39;name&#39; =&gt;&#39;iPhone 5&#39;,&#39;is_group&#39; =&gt;1),
    3=&gt; array(&#39;goods_id&#39; =&gt; 4,&#39;name&#39; =&gt;&#39;iPhone 5s&#39;,&#39;is_group&#39; =&gt;0)
);
function arraySort($multi_array,$sort_key,$sort=SORT_ASC){
    if(is_array($multi_array)){
        foreach ($multi_array as $row_array){
            if(is_array($row_array)){
                $key_array[] = $row_array[$sort_key];
            }else{
                return false;
            }
        }
    }else{
        return false;
    }
    array_multisort($key_array,$sort,$multi_array);
    return $multi_array;
}
print_r(arraySort($aProduct,&#39;is_group&#39;,SORT_DESC));exit;</code></pre><p>整个过程中的核心是对PHP内置函数array_multisort()的使用。下面是对array_multisort的简单介绍：</p>
<p>array_multisort() 可以用来一次对多个数组进行排序，或者根据某一维或多维对多维数组进行排序。成功返回 TRUE，失败则返回 FALSE。</p>
<p>这个函数的排序类似 SQL 的 ORDER BY 子句的功能，参数中的数组被当成一个表的列并以行来进行排序，第一个数组是要排序的主要数组。数组中的行（值）比较为相同的话，就会按照下一个输入数组中相应值的大小进行排序，依此类推。</p>
<p>本函数的参数结非常灵活，第一个参数必须是一个数组。随后的每一个参数可能是数组，也可能是下面的排序顺序标志之一：</p>
<p>排序顺序：<br>SORT_ASC – 默认，按升序排列。(A-Z)<br>SORT_DESC – 按降序排列。(Z-A)</p>
<p>排序类型：<br>SORT_REGULAR – 默认。将每一项按常规顺序排列。<br>SORT_NUMERIC – 将每一项按数字顺序排列。<br>SORT_STRING – 将每一项按字母顺序排列。</p>
<p>PS：每个数组后指定的排序标志仅对该数组有效，并且每个数组之后不能指定两个同类的排序标志。</p>
<p>PS：字符串键名将被保留，但是数字键将被重新索引，从 0 开始，并以 1 递增。</p>

        </article>
    </div>
</section>

    </main>
    <footer class="footer"> Copyright 2013 - 2019 Ruesin. All Rights Reserved </footer>
  </body>
</html>